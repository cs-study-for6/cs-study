# 프로토콜과 OSI 7 Layer 그리고 TCP/IP

## 프로토콜 (Protocol)

프로토콜(protocol)이란 서로 다른 시스템 및 기기 간 데이터 교환을 원활히 하기 위한 표준화된 통신 규약이다.

동일한 프로토콜을 사용하면 프로그램이나 기종이 다르더라도 컴퓨터 간 상호 통신이 가능하다. 가령 한 쪽은 Linux 기반의 맥북을 사용하고, 다른 한 쪽은 Window 기반의 삼성 컴퓨터를 사용한다고 했을 때, 두 컴퓨터의 환경이 다르기 때문에 중간에 규약을 정해주지 않으면 상호 통신이 불가능한 것이다.

### 프로토콜의 기본 요소

프로토콜의 기본 요소는 크게 구문, 의미, 타이밍의 3가지 요소가 있다.

1. <b>문법 (Syntax)</b> - 프로토콜의 문법은 데이터를 어떻게 구조화하고 전달하는지를 정의한다. 이는 데이터의 형식, 구조 및 전송 방법 등을 결정한다. Ex&#41; 데이터를 전송하는 데 사용되는 헤더(header), 데이터의 크기 및 형식, 데이터의 정료와 목적 등
2. <b>의미 (Semantic)</b> - 프로토콜의 의미는 데이터가 전달될 때 그 내용의 의미를 정의한다. 데이터가 어떤 정보를 포함하고 있는지, 그 정보의 의미나 목적이 무엇인지를 설명한다. Ex&#41; 데이터가 특정한 명령을 전달하는 것인지, 정보를 요청하는지 등
3. <b>타이밍 (Timing)</b> - 프로토콜의 타이밍은 전송 및 처리의 시간적 측면을 정의한다. 데이터가 언제 전송되어야 하는지, 언제 수신되어야 하는지, 언제 응답해야 하는지 등을 결정하는 것이다. 즉, 프로토콜의 타이밍은 데이터 흐름과 관련된 시간적 제약을 명시한다. Ex&#41; 데이터를 주고받는 과정에서의 시간 간격, 대기 시간, 데이터 전송의 우선순위 등

<br>

## OSI 7 계층

OSI 7 계층(Layer)은 네트워크 프로토콜을 설명하기 위한 모델 중 하나로, 네트워크 통신에서 발생하는 여러 가지 충돌 등의 문제들을 완화하기 위해 국제 표준 기구(ISO)에서 제시한 표준화한 네트워크 구조 모델이다.

이 모델은 7개의 계층으로 구성되어 있으며, 각 계층은 특정한 기능과 역할을 담당한다.

1. <b>물리 계층 (Physical Layer)</b> : 데이터를 전기적인 신호로 변환하여 전송하는 역할을 한다.
2. <b>데이터 링크 계층 (Data Link Layer)</b> : 물리적인 매체를 통해 안정적으로 데이터를 전송하기 위한 역할을 한다.
3. <b>네트워크 계층 (Network Layer)</b> : 데이터를 목적지까지 안전하고 효율적으로 전달하기 위한 역할을 한다.
4. <b>전송 계층 (Transport Layer)</b> : 데이터를 신뢰성 있게 전달하고 오류를 검출하고 복구하는 역할을 한다.
5. <b>세션 계층 (Session Layer)</b> : 통신 세션을 설정, 유지, 종료하는 역할을 한다.
6. <b>표현 계층 (Presentation Layer)</b> : 데이터의 형식을 변환하고 암호화하는 역할을 한다.
7. <b>응용 계층 (Application Layer)</b> : 사용자가 네트워크를 통해 서비스에 접근할 수 있도록 하는 역할을 한다.

이러한 계층 구조를 통해 네트워크 프로토콜이 데이터 통신의 여러 측면을 효율적으로 관리하고 제어할 수 있다.

<br>

데이터 송수신은 컴퓨터에서 컴퓨터로 데이터를 전송하는 것이다. 이때 컴퓨터 내부에는 여러 가지 일이 일어나는데, 이를 7개의 계층(layer)으로 나눠서 수행한다.

간단히 표로 보자면 다음과 같다.

<table>
    <tr>
        <th>계층</th>
        <th>이름</th>
        <th>설명</th>
    </tr>
    <tr>
        <td>7계층</td>
        <td>응용 계층<br>(Application Layer, 어플리케이션 계층)</td>
        <td>이메일 & 파일 전송, 웹 사이트 조회 등 어플리케이션에 대한 서비스를 제공한다.</td>
    </tr>
    <tr>
        <td>6계층</td>
        <td>표현 계층<br>(Presentation Layer, 프레젠테이션 계층)</td>
        <td>문자 코드, 압축, 암호화 등의 데이터를 변환한다.</td>
    </tr>
    <tr>
        <td>5계층</td>
        <td>세션 계층(Session Layer)</td>
        <td>세션 체결, 통신 방식을 결정한다.</td>
    </tr>
    <tr>
        <td>4계층</td>
        <td>전송 계층<br>(Transport Layer, 트랜스포트 계층)</td>
        <td>신뢰할 수 있는 통신을 구현한다.</td>
    </tr>
    <tr>
        <td>3계층</td>
        <td>네트워크 계층(Network Layer)</td>
        <td>다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정한다.</td>
    </tr>
    <tr>
        <td>2계층</td>
        <td>데이터 링크 계층(Data Link Layer)</td>
        <td>네트워크 기기 간의 데이터 전송 및 물리 주소를 결정한다.</td>
    </tr>
    <tr>
        <td>1계층</td>
        <td>물리 계층(Physical Layer)</td>
        <td>시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어한다.</td>
    </tr>
</table>

<br>

## TCP/IP 4 계층

TCP/IP (Transmission Control Protocol / Internet Protocol) 모델은 인터넷 프로토콜 스위트(Internet Protocol Suite)에서 사용되는 통신 프로토콜의 집합을 설명하는 모델이다. OSI 7 계층이 나오기 전 널리 사용되던 사실상의 표준(de facto standard) 역할이다.

이 모델은 4개의 계층으로 구성되어 있다.

1. <b>네트워크 접근 계층 (Network Access Layer)</b> : 네트워크에 물리적으로 연결되는 하드웨어와 관련된 프로토콜들을 다룬다. Ex&#41; Wi-Fi, 이더넷
2. <b>인터넷 계층 (Internet Layer)</b> : IP 프로토콜을 사용하여 데이터를 전송하는 역할을 한다. 이 계층은 데이터의 출발지와 목적지를 식별하고, 경로 선택과 패킷 전달을 담당한다.
3. <b>전송 계층 (Transport Layer)</b> : 데이터의 신뢰성 있는 전송을 담당하는 계층으로, TCP(Transmission Control Protocol)와 UDP(User Datagram Protocol)를 포함한다. TCP는 데이터의 신뢰성과 순서를 보장하며, UDP는 신속한 데이터 전송을 지원한다.
4. <b>응용 계층 (Application Layer)</b> : 최종 사용자가 네트워크 서비스에 접근하는 데 사용되는 프로토콜들을 포함한다. Ex&#41; HTTP, FTP, SMTP, DNS 등

TCP/IP 모델은 OSI 모델보다 간단하고 실용적이며, 현재 전 세계적으로 가장 널리 사용되는 네트워크 프로토콜 모델 중 하나이다. 이 모델을 통해 다양한 장치와 시스템이 효율적으로 통신할 수 있다.

<br>

## OSI 7 계층과 TCP/IP 4 계층 비교

OSI 7 계층과 TCP/IP 4 계층을 그림으로 보면 다음과 같다.

<img width="600" alt="https://www.geeksforgeeks.org/tcp-ip-model/" src="https://github.com/cs-study-for6/cs-study/assets/88493727/870cbd79-a8ef-4692-838c-b7c909761d54">

사실상 같은 내용인데, TCP/IP 4 계층이 좀 더 세분화된 것이 OSI 7 계층이라고 볼 수 있는 것이다.

<br>

## 질문에 대한 답변

### Q1. 표현 계층은 데이터의 변환 과정이 어떤 식으로 이루어지는가? (어떤 종류의 데이터를 변환하고 있는지, 변환 과정에서 발생할 수 있는 문제와 대응 방식 등)

6계층 표현 계층(Presentation Layer)은 데이터를 어떻게 표현할지 정하는 역할을 하는 계층이다. 세 가지 기능을 가지는데 이는 다음과 같다.

1. 송신자에게 온 데이터를 해석하기 위한 응용계층 데이터 부호화, 변화
2. 수신자에서 데이터의 압축을 풀 수 있는 방식으로 된 데이터 압축
3. 데이터의 암호화와 복호화 (EBCDIC로 인코딩된 파일을 ASCII 로 인코딩된 파일로 바꿔주는 것이 한 가지 예)

변환 과정에서 발생할 수 있는 문제와 대응방안 예시는 다음과 같다.

1. 호환성 문제 - 송신자와 수신자 간에 데이터 형식이 다를 경우 문제 발생. Ex) 송신자가 이미지를 JPEG 형식으로 보내고, 수신자가 GIF 형식만 지원하는 경우 문제 발생. ⇒ 이런 문제 해결하기 위해 데이터 형식 표준화, 변환기 사용하여 데이터 호환 가능한 형식으로 변환할 수 있음
2. 데이터의 압축과 해제 - 데이터를 보내는 데 사용되는 네트워크 대역폭을 줄이기 위해 데이터를 압축할 수 있지만, 이는 데이터를 수신하는 측에서 압축을 해제해야 하는 추가 작업을 필요로 한다. ⇒ 압축 알고리즘을 사용하여 데이터를 효율적으로 압축하고, 수신 측에서는 압축된 데이터를 해제하여 복원한다.
3. 데이터의 보안과 프라이버시 문제 - 데이터가 변환되는 과정에서 민감한 정보 노출될 수 있으며, 이는 데이터 유출 및 해킹과 같은 보안 위협으로 이어질 수 있음. ⇒ 암호화 기술을 사용하여 데이터 안전하게 전송하고, 접근 제어 및 인증 기술을 사용하여 무단 접근을 방지할 수 있다.

<br>

### Q2. 세션 계층에서는 세션 관리가 어떻게 이루어지는가? 웹에서의 세션과 같은 개념인가?

세션 계층은 통신의 일을 책임지고 있는 계층이다.
2개의 기기, 컴퓨터 또는 서버 간에 통신을 하기 위해서는 세션을 만들어야 하는데 이 작업이 여기서 처리된다.

네트워크 연결을 성립, 제어와 운영, 연결의 종료를 책임지고, 또 각각의 알맞은 Application으로 데이터를 보내기 위해서는 Application으로 들어오는 Data들을 분리해서 유지해주는 기능을 수행한다.
OS가 이 계층에 속한다.


세션 관리에는 몇 가지 주요 기능이 포함된다.

1. 세션 설정 - 통신 장치 간의 세션을 시작, 유지 및 종료. 장치 간 통신에 필요한 설정 및 해제 프로세스 처리
2. 대화 제어 - 데이터 흐름을 제어하여 장치 간의 대화 등을 관리. 데이터 교환 방법에 대한 규칙을 설정하여 각 장치가 교대로 정보를 전송하고 데이터 충돌을 방지하도록 한다.
3. 토큰 관리 - 일부 통신 프로토콜에서 세션 계층은 장치에 데이터 전송 권한을 부여하는 토큰을 관리할 수 있다.
4. 동기화 - 장치 간 데이터 전송이 동기화된 상태를 유지하도록 보장한다. 데이터 손실이나 손상을 방지하기 위해 데이터 교환 타이밍을 조정한다.
5. 오류 복구 - 데이터 전송 중에 오류 발생하면 세션 계층이 이러한 오류 감지하고 복구하는 역할 담당한다. 데이터 무결성을 보장하기 위해 손실된 데이터 재전송이나 오류 수정 코드와 같은 메커니즘을 사용할 수 있다.

전반적으로 세션 계층은 장치 간의 세션 설정, 제어 및 종료를 관리하여 네트워크 내에서 안정적이고 질서 있는 통신을 보장한다.

OSI 7 계층에 있는 “세션”이라는 용어와 우리가 배운 백엔드 개발에서 사용되는 “세션”은 서로 관련된 개념이지만 완전히 동일하지는 않다.

OSI 모델에서 세션 계층(계층 5)은 장치 간의 연결 설정, 유지 및 종료를 담당한다. 토큰 관리, 동기화 및 오류 복구를 포함해 장치 간의 대화 제어를 관리한다. 이 세션 관리는 네트워크의 서로 다른 시스템이나 장치 간의 통신과 더 관련이 있다.

OSI 세션 계층은 네트워크의 장치 간 통신 세션을 관리하는 반면, 웹 백엔드 세션은 웹 어플리케이션의 클라이언트와 서버 간의 상태 기반 상호 작용을 관리한다.

<br>

### Q3. 현재에는 OSI 모델이 TCP/IP 모델보다 더 복잡한 이유와 그럼에도 왜 표준으로 사용되는 것인가?

OSI 모델은 상세하고 포괄적인 계층 구성으로 인해 TCP/IP 모델보다 더 복잡한 것으로 간주된다. OSI 모델의 각 계층에는 특정 기능과 책임이 있으며 프로토콜은 각 계층에서 작동하도록 설계되었다. 이러한 세분성은 문제를 명확하게 분리하고 다양한 네트워크 기술 간의 상호 운용성을 촉진한다.

But, TCP/IP 모델은 다음과 같은 이유로 실제 구현 및 네트워킹 시나리오에서 선호되는 경우가 많다.

* 단순성 - 간단하고 능률적. 여러 OSI 계층을 더 넓은 범주로 결합하여 실제로 이해하고 구현하기 쉽다.
* 역사적 맥락 - 초기부터 채택되었던 것. De facto Standard
* 실용성 - 인터넷의 설계 원칙과 요구 사항을 반영하므로 최신 네트워킹 환경에 매우 적합하다. 

아무튼, 여전히 OSI 모델은 여전히 네트워킹을 위한 표준 참조 모델로 간주된다.
OSI 모델은 대부분의 네트워킹 시스템에서 직접 구현되지 않을 수 있지만 네트워크 아키텍처 및 프로토콜 설계의 기본 원칙에 대한 귀중한 통찰력을 제공한다. 따라서 OSI 모델은 네트워킹 교육 및 개발에서 계속해서 가르치고 참조되어 해당 분야의 지속적인 관련성에 기여하고 있다.

<br>

### Q4. TCP/IP 는 5계층으로도 나뉘는데, 이 경우 대략 어떻게 분류되는가?

물리계층 / 데이터링크 계층 / 네트워크 계층 / 전송 계층 / 응용 계층

물리계층(Physical layer) - 물리적 매체를 통한 비트 스트림 전송(비트를 쭉 보내는 과정)에 요구되는 기능을 담당.

데이터링크계층(data link layer) - 노드 대 노드 전달(node-to-node delivery)의 책임을 가진다.

네트워크 계층 (network layer) - 패킷을 발신지 대 목적지 전달에 대한 책임을 가짐

전송 계층(transport layer) - 전체 메세지의 프로세스 대 프로세스(프로세스란 구동하고 있는 앱, 프로그램) 전달에 대한 책임을 지님. 전체 메세지가 완전하게 바른 순서로 도착하는 것을 보장.

응용 계층 (application layer) - 사용자가 네트워크에 접근할 수 있도록 해줌. 사용자 인터페이스(브라우저) 제공. 서비스로는 원격 로그인, 파일 액세스, 전송, 관리, 메일 서비스, HTTP www 웹 등… 즉, 우리가 직접 프로그래밍을 할 수 있는 위치인 계층.

<br>

### Q5. OSI 7 계층 중 전송 계층의 데이터 전달과 네트워크 계층의 데이터를 목적지까지 전달하는 것의 차이가 있는지, 아니면 신뢰성과 비용 측면에서의 차이만 있을 뿐인지 궁금하다.

4 계층인 전송 계층과 3 계층인 네트워크 계층 모두 데이터 전송 프로세스에 관여. 하지만 서로 다른 기능을 제공하고 네트워크 스택의 서로 다른 수준에서 작동한다.

차이점은 다음과 같다.

전송 계층

* 장치 간 종단 간 통신 담당
* 데이터를 세그먼트(TCP의 경우) 또는 데이터그램(UDP의 경우)이라는 더 작은 단위로 분할하는 작업이 포함된다.
* 오류 검사, 흐름 제어 및 세그먼트 순서 지정을 제공하여 안정적이고 질서 있는 데이터 전달을 보장한다.
* TCP 및 UDP와 같은 이 전송 계층의 프로토콜은 연결 지향 통신 또는 연결 없는 통신과 같은 상위 수준의 기능을 사용하여 데이터 전송을 처리한다.
* 송신 어플리케이션과 수신 어플리케이션으로 데이터를 전달하는 것과 관련되어 기본 네트워크 인프라의 세부 사항을 추상화한다.

네트워크 계층

* 서로 다른 네트워크 간의 패킷 라우팅 및 전달을 담당
* 데이터를 패킷으로 캡슐화하고 라우팅을 용이하게 하기 위해 IP(인터넷 프로토콜) 헤더와 같은 네트워크 계층 헤더를 추가하는 작업이 포함된다.
* 주소 지정, 패킷 전환 및 논리적 주소 지정(IP 주소)을 처리하여 데이터가 여러 네트워크를 통해 올바른 대상으로 라우팅되도록 한다.
* 네트워크 계층의 프로토콜은 가능한 가장 효율적인 방식으로 상호 연결된 네트워크를 통해 패킷을 전달하는 역할을 담당한다.

요약하면, 전송 계층은 주로 어플리케이션 간의 end-to-end 통신과 관련되어 안정적이고 질서 있는 데이터 전달을 보장하는 반면, 네트워크 계층은 네트워크 간의 패킷 라우팅 및 전달을 담당한다.

<br>

### Q6. 7계층으로 분화한 이유가 네트워크 통신에서 발생하는 여러 가지 충돌 등의 문제들 때문이라 하였는데, 어떤 문제들이 있었던 것인가?

* 이기종 네트워크 : 컴퓨터 네트워킹 초기에는 다양한 공급업체에서 개발한 다양한 네트워킹 기술과 프로토콜이 확산되었었다. 서로 다른 시스템은 아키텍처, 프로토콜 및 표준의 차이로 인해 서로 통신하는 데 종종 어려움을 겪었다.
* 비호환성 문제 : 한 유형의 네트워크에서 전송된 데이터는 다른 유형의 네트워크에서 제대로 이해되거나 처리되지 않아 데이터 손실, 손상 또는 오해가 발생할 수 있다.
* 표준화 부족 : 네트워크 통신을 위한 공통 프레임워크가 표준이 없기 때문에 이러한 호환성 문제 더욱 악화됨. 
* 충돌 및 통신 오류 : 네트워크가 확장되고 상호 연결됨에 따라 통신 충돌 및 통신 오류가 더 흔해졌다. 
* 표준화의 필요성 : 네트워크 통신에 대한 표준화된 접근 방식의 필요성을 인지한 ISO(국제 표준화 기구)는 네트워킹 개념을 이해하고 표준화하기 위한 프레임워크 역할을 할 수 있는 포괄적인 참조 모델을 개발하려는 노력을 시작했다.

<br>

### Q7. 프로토콜의 기본 요소에 대한 구체적인 예시가 있으면 좋겠다.

* syntax(구문) - Ex&#41; HTTP

HTTP 에서 구문은 클라이언트와 서버 간에 교환되는 메세지의 구조를 정의한다. 예를 들어 HTTP 요청은 요청 라인, 헤더 및 선택적 메세지 본문으로 구성되며 모두 HTTP 사양에 지정된 구문 규칙에 따라 형식이 지정된다. 마찬가지로 HTTP 응답에는 고유한 구문 구조가 있다. 이 구문을 준수하면 클라이언트와 서버 모두 교환되는 메세지의 형식을 이해할 수 있다.

* semantic(의미) - EX&#41; SMTP (단순 메일 전송 프로토콜)

SMTP는 이메일을 보내고 받는 과정에서 메일 서버 간에 교환되는 명령과 응답의 의미 등을 정의한다. 예를 들어, SMTP 명령 “MAIL FROM”은 보낸 사람의 이메일 주소를 지정하는 데 사용되고, “RCPT TO”는 받는 사람의 이메일 주소를 지정하는 데 사용된다. 각 명령에는 해당 명령의 목적과 수진 서버에서 명령을 해석하는 방법을 나타내는 특정 의미가 있다. 마찬가지로 SMTP 응답 코드는 명령 결과를 전달하고 이메일 전송 상태에 대한 정보를 제공한다.

* timing(타이밍) - EX&#41; TCP (전송 제어 프로토콜)

TCP는 호스트 간에 안정적이고 순서화된 데이터 연결을 보장하는 연결 지향 프로토콜이다. TCP의 타이밍 측면에는 연결 설정 및 종료는 물론 데이터 흐름 관리를 위한 메커니즘이 포함된다. 예를 들어 TCP는 클라이언트와 서버 간의 정확한 타이밍을 포함하는 연결 설정을 위해 3-way-handshake를 사용한다. 또한 TCP는 네트워크 정체 및 패킷 손실을 처리하기 위해 시간 초과 및 재전송과 같은 메커니즘을 구현하여 허용 가능한 시간 내에 데이터가 전달되도록 보장한다.

<br><br><br><br><br>

[참고자료]

<a href="https://velog.io/@cgotjh/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-OSI-7-%EA%B3%84%EC%B8%B5-OSI-7-LAYER-%EA%B8%B0%EB%B3%B8-%EA%B0%9C%EB%85%90-%EA%B0%81-%EA%B3%84%EC%B8%B5-%EC%84%A4%EB%AA%85">[네트워크] OSI 7 계층 (OSI 7 LAYER) 기본 개념, 각 계층 설명</a>

<a href="https://whwl.tistory.com/154">[네트워크] 프로토콜의 개념 / 특징 / 요소 / 종류</a>

<a href="https://velog.io/@moonblue/TCPIP-%EC%99%80-OSI-7%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0-%EB%B9%84%EA%B5%90">TCP/IP, OSI 7 계층 구조 비교</a>

<a href="https://velog.io/@yun8565/OSI-7%EA%B3%84%EC%B8%B5%EA%B3%BC-TCPIP-4%EA%B3%84%EC%B8%B5">OSI 7계층, TCP/IP 4계층 + TCP, UDP 정리</a>

패스트캠퍼스 - 한 번에 끝내는 컴퓨터 공학 전공필수 & 인공지능 심화 초격차 패키지 Online. Part 4. 컴퓨터 네트워크
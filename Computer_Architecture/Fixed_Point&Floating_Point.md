# 고정 소수점 & 부동 소수점

컴퓨터는 실수를 표현하기 위해 두 가지 방법을 사용할 수 있다.

<b>고정 소수점</b>과 <b>부동 소수점</b> 표기 방식이다.

## 고정 소수점 (Fixed Point) 표기법

<b>고정 소수점 표기법의 경우, 소수점이 찍힐 위치를 미리 정해놓고 소수를 표현하는 방식</b>이다.

가령, -3.141592는 부호(-)와 정수부(3), 소수부(0.141592)의 3 가지 요소가 필요하다.

<img src="./image/fixed_point.png" alt="고정소수점 그림" width="600" />

32 bit를 기준으로 한 예시이다. 맨 앞에 있는 한 칸은 부호 비트로 1 bit의 공간을 할당하고, 그 다음 15 칸은 정수를 표현하는 정수부, 그리고 그 이후의 16칸은 소수(소수점 이후의 실수)를 표현하는 소수부로 설정하였다.

위 그림에서 경계는 필요에 의해서 왔다갔다 할 수 있기는 하다.

<br>

고정 소수점 방식의 장단점은 다음과 같다.

* 장점 : 실수를 정수부와 소수부로 표현하여 단순하다.
* 단점 : 표현의 범위가 너무 적어서 활용하기 힘들다. (정수부는 15bit, 소수부는 16bit)

<br>

위 그림을 보면 정수는 15개의 크기로 표현할 수 있는 값만 정수로 표현할 수 있다. -2^14 ~ 2^14 - 1 범위 안에 있는 정수를 표현할 수 있겠다. 그리고 그 안에서 소수점은 16자리까지 표현할 수 있다.

고정 소수점으로 하면 내가 표현하고자 하는 숫자에 대해서는 오차 없이 표현할 수 있다.

But, <u>숫자의 범위가 너무 제한적</u>이다.

자바의 float, double을 생각해봤을 때, 이 자료형들이 표현할 수 있는 숫자의 범위는 위 그림의 범위를 한참 넘어선다. (심지어 int형이 더 범위가 크다.) 이유는, <b>float, double 자료형의 경우 부동 소수점 표기 방식을 취하고 있기 때문</b>이다. 

<br>

## 부동 소수점 (Floating Point) 표기법

부동 소수점의 '부동(浮動)'은 '둥둥 떠다녀서 왔다갔다 한다'는 의미이다.

<b>부동 소수점 표기 방법은 소수점의 위치를 고정시켜 표현하는 방식</b>이다. 이때 고정시킨다는 것은 <b>'정규화'</b>를 한다는 것이다. 아래 그림은 정규화를 실행한 것이다.

<img src="./image/floating_point_ex.png" alt="부동소수점 예시" width="280" />

즉, 소수점의 위치를 왼쪽의 가장 유효한 숫자(즉 1) 다음으로 고정시키고 밑 수의 지수 승으로 표현하는 것이다.

위 그림의 경우 세 칸 이동했으므로 2^3을 곱했다.

예를 들어 0.00011은 1.1 x 2^-4 가 된다. (0.0은 따로 저장하는 방식이 있다.)

<img src="./image/mantissa_exponent.png" alt="가수부와 실수부" width="305" />

위 그림에서 볼 수 있듯이, 소수 부분을 '가수부'라 하고, 지수 부분을 '지수부'라고 한다.

<br>

## 실수를 저장하는 형식

자바에는 실수를 저장하는 방식으로 float와 double이 있었다. 이를 각각 단정도 실수(32 bit), 배정도 실수(64 bit)라고 한다.

각각을 그림으로 보면 다음과 같다.

<img src="./image/floatTofloating.png" alt="단정도실수" width="500">

<img src="./image/doubleTofloating.png" alt="배정도실수" width="680">

단정도 실수든, 배정도 실수든 부호 비트 1 bit는 고정이다.

* 가수부(mantissa) : 실수의 유효 자릿수들을 부호화된 고정 소수점으로 표현한 것
* 지수부(exponent) : 실제 소수점의 위치를 지수 승으로 표현한 것

<br>

### 단정도 실수의 가부 부분을 만드는 방법

예를 들어, 단정도 실수의 가수 부분을 만들어 보겠다. 다음 예시 숫자를 사용하겠다.

Ex&#41; 1001.0011

순서는 다음과 같다.

1. 정수부의 첫 번째 자리가 1이 되도록 (유효한 숫자 1이 오도록) 오른쪽으로 shift
2. 소수점 이하를 23 bit로 만든다.
3. 소수점 이하만을 가수 부분에 저장
4. 지수 부분은 shift한 자릿수 만큼 증가 또는 감소

예시 숫자를 위 순서에 입각해 가수 부분을 구하는 것을 보면 다음과 같다.

<table style="border-style: solid; border-color: white; border-width: 2px;">
    <tr>
        <tb>
            1001.0011<br>
            0001.<u>00100110000000000000000</u><br>
            00100110000000000000000
            <br><br>
            → 1.0010011 x 2^3
        </tb>
    </tr>
</table>